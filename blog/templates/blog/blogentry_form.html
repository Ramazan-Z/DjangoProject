{% extends 'catalog/base.html' %}

{% block title %}Редактирование записи{% endblock %}

{% block content %}

{% include "catalog/includes/navbar.html" %}

<div class="container">
    <div class="card mb-4 box-shadow">
        <div class="card-header">
            <h4 class="my-0 font-weight-normal">Заполните форму</h4>
        </div>
        <div class="card-body">
            <form method="post" class="form-floating" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="mb-3">
                    {{ form.heading.label_tag }}
                    <input type="text" name="{{ form.heading.name }}" value="{{ blogentry.heading }}" required=""
                        id="{{ form.heading.id_for_label}}" placeholder="{{ form.heading.help_text }}"
                        class="form-control">
                </div>
                <div class="mb-3">
                    {{ form.content.label_tag }}
                    <textarea name="{{ form.content.name }}" cols="40" rows="10" id="{{ form.content.id_for_label }}"
                        placeholder="{{ form.content.help_text }}"
                        class="form-control">{{ blogentry.content }}</textarea>
                </div>
                <div class="mb-3">
                    {{ form.preview.label_tag }}
                    {% if blogentry.preview %}
                    <p>В настоящее время: <a href="{{ blogentry.preview.url }}">{{ blogentry.preview }}</a></p>
                    <input type="checkbox" name="{{ form.preview.name }}-clear" id="{{ form.preview.name }}-clear_id">
                    <label for="{{ form.preview.name }}-clear_id">Очистить</label>
                    {% endif %}
                    <input type="file" name="{{ form.preview.name }}" accept="image/*"
                        id="{{ form.preview.id_for_label }}" class="form-control">
                </div>
                <div class="mb-3">
                    {{ form.is_publication.label_tag }}
                    {{ form.is_publication }}
                </div>
                <button type="submit" class="btn btn-primary">Сохранить</button>
                <a href="{% url 'blog:blogentry_list' %}" class="btn btn-secondary">Отмена</a>
            </form>
        </div>
    </div>
    {% include "catalog/includes/footer.html" %}
</div>
{% endblock %}